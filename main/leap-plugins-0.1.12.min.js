/* 
 * LeapJS-Plugins  - v0.1.12 - 2017-09-27 
 * http://github.com/leapmotion/leapjs-plugins/ 
 * 
 * Copyright 2017 LeapMotion, Inc 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); 
 * you may not use this file except in compliance with the License. 
 * You may obtain a copy of the License at 
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0 
 * 
 * Unless required by applicable law or agreed to in writing, software 
 * distributed under the License is distributed on an "AS IS" BASIS, 
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
 * See the License for the specific language governing permissions and 
 * limitations under the License. 
 * 
 */

(function(){var e,t,i,r,o,n,a,s,l,c,h,A,p,d,m;m=null,t="undefined"!=typeof require?require("three"):window.THREE,l=function(e,i){var r,o,n,a,s,l;return m.scene=new t.Scene,m.rendererOps||(m.rendererOps={}),void 0===m.rendererOps.alpha&&(m.rendererOps.alpha=!0),m.renderer=s=new t.WebGLRenderer(m.rendererOps),l=m.width||window.innerWidth,n=m.height||window.innerHeight,s.setClearColor(0,0),s.setSize(l,n),s.domElement.className="leap-boneHand",s.shadowMap.enabled=!0,s.shadowMap.type=t.PCFSoftShadowMap,e.appendChild(s.domElement),a=1,o=1e4,i&&(a*=i,o*=i),m.camera=r=new t.PerspectiveCamera(45,l/n,a,o),r.position.set(0,300,500),r.lookAt(new t.Vector3(0,160,0)),m.scene.add(r),m.width||m.height||window.addEventListener("resize",function(){return l=window.innerWidth,n=window.innerHeight,r.aspect=l/n,r.updateProjectionMatrix(),s.setSize(l,n),s.render(m.scene,r)},!1),m.render||(m.render=function(e){return s.render(m.scene,m.camera)}),m.render()},r=null,c=null,o=null,s=null,A=null,a=null,h=null,p=null,i=null,e=function(){function e(){var e,r,n,l,d,u,g,f,C;for(p=isNaN(m.opacity)?new t.MeshPhongMaterial({fog:!1}):new t.MeshPhongMaterial({fog:!1,transparent:!0,opacity:m.opacity}),a=40*s,h=40*A,this.fingerMeshes=[],r=l=0;l<5;r=++l){for(e=[],n=d=0,C=0===r?3:4;0<=C?d<C:d>C;n=0<=C?++d:--d)(g=new t.Mesh(new t.SphereGeometry(h,32,32),p.clone())).name="hand-bone-"+n,g.material.color.copy(c),g.renderOrder=(9*r+2*n)/36,g.castShadow=!0,m.scene.add(g),e.push(g),(g=new t.Mesh(new t.CylinderGeometry(a,a,40,32),p.clone())).name="hand-joint-"+n,g.material.color.copy(o),g.renderOrder=(9*r+2*n+1)/36,g.castShadow=!0,m.scene.add(g),e.push(g);(g=new t.Mesh(new t.SphereGeometry(h,32,32),p.clone())).material.color.copy(c),g.castShadow=!0,m.scene.add(g),e.push(g),this.fingerMeshes.push(e)}if(m.arm){for(this.armMesh=new t.Object3D,this.armBones=[],this.armSpheres=[],r=u=0;u<=3;r=++u)this.armBones.push(new t.Mesh(new t.CylinderGeometry(a,a,r<2?1e3:100,32),p.clone())),this.armBones[r].material.color.copy(o),this.armBones[r].castShadow=!0,this.armBones[r].name="ArmBone"+r,r>1&&this.armBones[r].quaternion.multiply(i),this.armMesh.add(this.armBones[r]);for(this.armSpheres=[],r=f=0;f<=3;r=++f)this.armSpheres.push(new t.Mesh(new t.SphereGeometry(h,32,32),p.clone())),this.armSpheres[r].material.color.copy(c),this.armSpheres[r].castShadow=!0,this.armSpheres[r].name="ArmSphere"+r,this.armMesh.add(this.armSpheres[r]);m.scene.add(this.armMesh)}}return e.unusedHandMeshes=[],e.get=function(){var t;return 0===e.unusedHandMeshes.length&&(t=e.create()),(t=e.unusedHandMeshes.pop()).show(),t},e.prototype.replace=function(){return this.hide(),e.unusedHandMeshes.push(this)},e.create=function(){var t;return(t=new e).setVisibility(!1),e.unusedHandMeshes.push(t),e.onMeshCreated&&e.onMeshCreated(t),t},e.prototype.traverse=function(e){var t,i,r,o,n;for(t=i=0;i<5;t=++i)for(r=0,o=(n=this.fingerMeshes[t]).length;r<o;r++)e(n[r]);return this.armMesh&&this.armMesh.traverse(e)},e.prototype.scaleTo=function(e){var t,i,r,o,n,a,s,l,c,h,A,p,d;for(r=e.middleFinger.proximal.length/this.fingerMeshes[2][1].geometry.parameters.height,c=A=0;A<5;c=++A)for(a=e.fingers[c],h=0;;){if(h===this.fingerMeshes[c].length-1){(d=this.fingerMeshes[c][h]).scale.set(r,r,r);break}o=a.bones[3-h/2],(d=this.fingerMeshes[c][h]).scale.set(r,r,r),h++,d=this.fingerMeshes[c][h],s=o.length/d.geometry.parameters.height,d.scale.set(r,s,r),h++}if(m.arm){for(t=e.arm.length/(this.armBones[0].geometry.parameters.height+this.armBones[0].geometry.parameters.radiusTop),i=e.arm.width/(this.armBones[2].geometry.parameters.height+this.armBones[2].geometry.parameters.radiusTop),c=p=0;p<=3;c=++p)this.armBones[c].scale.set(r,c<2?t:i,r),this.armSpheres[c].scale.set(r,r,r);n=e.arm.width/2*.85,l=e.arm.length/2,this.armBones[0].position.setX(n),this.armBones[1].position.setX(-n),this.armBones[2].position.setY(l),this.armBones[3].position.setY(-l),this.armSpheres[0].position.set(-n,l,0),this.armSpheres[1].position.set(n,l,0),this.armSpheres[2].position.set(n,-l,0),this.armSpheres[3].position.set(-n,-l,0)}return this},e.prototype.formTo=function(e){var i,o,n,a,s,l;for(n=s=0;s<5;n=++s)for(o=e.fingers[n],a=0;;){if(a===this.fingerMeshes[n].length-1){(l=this.fingerMeshes[n][a]).position.fromArray(i.prevJoint);break}i=o.bones[3-a/2],(l=this.fingerMeshes[n][a]).position.fromArray(i.nextJoint),++a,(l=this.fingerMeshes[n][a]).position.fromArray(i.center()),l.setRotationFromMatrix((new t.Matrix4).fromArray(i.matrix())),l.quaternion.multiply(r),++a}return this.armMesh&&(this.armMesh.position.fromArray(e.arm.center()),this.armMesh.setRotationFromMatrix((new t.Matrix4).fromArray(e.arm.matrix())),this.armMesh.quaternion.multiply(r)),this},e.prototype.setVisibility=function(e){var t,i,r,o,n;for(t=r=0;r<5;t=++r)for(i=0;;)if(this.fingerMeshes[t][i].visible=e,++i===this.fingerMeshes[t].length)break;if(m.arm){for(n=[],t=o=0;o<=3;t=++o)this.armBones[t].visible=e,n.push(this.armSpheres[t].visible=e);return n}},e.prototype.show=function(){return this.setVisibility(!0)},e.prototype.hide=function(){return this.setVisibility(!1)},e}(),d=function(t){var i;if(m.scene)return(i=t.data("handMesh"))||(i=e.get().scaleTo(t),t.data("handMesh",i),e.onMeshUsed&&e.onMeshUsed(i)),i.formTo(t)},n=function(e){var t;return(t=e.data("handMesh"))&&t.replace(),t=e.data("handMesh",null)},Leap.plugin("boneHand",function(u){var g,f;return null==u&&(u={}),m=u,g=this,c=(new t.Color).setHex(6138368),o=(new t.Color).setHex(16777215),m.boneScale&&(s=m.boneScale),m.jointScale&&(A=m.jointScale),m.boneColor&&(o=m.boneColor),m.jointColor&&(c=m.jointColor),m.HandMesh=e,m.addShadowCamera=function(){if(m.light=new t.SpotLight(16777215,1),m.light.castShadow=!0,m.light.shadow.mapSize.width=1024,m.light.shadow.mapSize.height=1024,m.light.shadow.camera.near=500,m.light.shadow.camera.far=3e3,m.light.position.set(0,1e3,1e3),m.light.target.position.set(0,0,-1e3),m.camera.add(m.light.target),m.camera.add(m.light),g.plugins.transform&&(g.plugins.transform.getScale()&&(m.light.shadowCameraNear*=g.plugins.transform.scale.x,m.light.shadowCameraFar*=g.plugins.transform.scale.x,m.light.target.position.multiply(g.plugins.transform.scale),m.light.position.multiply(g.plugins.transform.scale)),!0===g.plugins.transform.vr&&m.camera.position.set(0,0,0),"desktop"===g.plugins.transform.vr))return m.camera.position.set(0,.15,.3)},r=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),s=1/6,A=.2,a=null,h=null,p=null,i=(new t.Quaternion).setFromEuler(new t.Euler(0,0,Math.PI/2)),e.onMeshCreated=function(e){return g.emit("handMeshCreated",e)},e.onMeshUsed=function(e){return g.emit("handMeshUsed",e)},this.use("handEntry"),this.use("handHold"),void 0===m.scene&&(console.assert(m.targetEl),this.plugins.transform&&this.plugins.transform.getScale()&&(f=this.plugins.transform.scale.x),l(m.targetEl,f),m.addShadowCamera()),m.scene&&(e.create(),e.create(),0===Leap.version.major&&Leap.version.minor<7&&Leap.version.dot<4&&console.warn("BoneHand default scene render requires LeapJS > 0.6.3. You're running have "+Leap.version.full),this.on("frameEnd",function(e){if(m.render)return m.render(e)})),this.on("handLost",n),{hand:d}})}).call(this),function(){var e;if(e=function(){var e;return e=[],0===Leap.version.major&&Leap.version.minor<5&&console.warn("The hand entry plugin requires LeapJS 0.5.0 or newer."),this.on("deviceStopped",function(){for(var t=0,i=e.length;t<i;t++)id=e[t],e.splice(t,1),this.emit("handLost",this.lastConnectionFrame.hand(id)),t--,i--}),{frame:function(t){var i,r,o;r=t.hands.map(function(e){return e.id});for(var n=0,a=e.length;n<a;n++)i=e[n],-1==r.indexOf(i)&&(e.splice(n,1),this.emit("handLost",this.frame(1).hand(i)),n--,a--);for(o=[],n=0,a=r.length;n<a;n++)i=r[n],-1===e.indexOf(i)?(e.push(i),o.push(this.emit("handFound",t.hand(i)))):o.push(void 0);return o}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("handEntry",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.handEntry=e}}.call(this),function(){var e;if(e=function(){var e,t;return t={},e=function(e,i,r){var o,n,a,s;if(t[a=e+this.id]||(t[a]=[]),o=t[e+this.id],void 0!==r)return o[i]=r;if("[object String]"==={}.toString.call(i))return o[i];s=[];for(n in i)void 0===(r=i[n])?s.push(delete o[n]):s.push(o[n]=r);return s},{hand:{data:function(t,i){return e.call(this,"h",t,i)},hold:function(e){return e?this.data({holding:e}):this.hold(this.hovering())},holding:function(){return this.data("holding")},release:function(){var e;return e=this.data("holding"),this.data({holding:void 0}),e},hoverFn:function(e){return this.data({getHover:e})},hovering:function(){var e;if(e=this.data("getHover"))return this._hovering||(this._hovering=e.call(this))}},pointable:{data:function(t,i){return e.call(this,"p",t,i)}}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("handHold",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.handHold=e}}.call(this),function(e,t){"use strict";function i(e){this.options=e||(e={}),this.loading=!1,this.timeBetweenLoops=e.timeBetweenLoops||50,this.packingStructure=["id","timestamp",{hands:[["id","type","direction","palmNormal","palmPosition","palmVelocity","stabilizedPalmPosition","pinchStrength","grabStrength","confidence","armBasis","armWidth","elbow","wrist"]]},{pointables:[["id","direction","handId","length","stabilizedTipPosition","tipPosition","tipVelocity","tool","carpPosition","mcpPosition","pipPosition","dipPosition","btipPosition","bases","type"]]},{interactionBox:["center","size"]}],this.setFrames(e.frames||[])}var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var t,i,o,n,a,s,l,c="",h=0;for(e=r.compress(e);h<2*e.length;)h%2==0?(t=e.charCodeAt(h/2)>>8,i=255&e.charCodeAt(h/2),o=h/2+1<e.length?e.charCodeAt(h/2+1)>>8:NaN):(t=255&e.charCodeAt((h-1)/2),(h+1)/2<e.length?(i=e.charCodeAt((h+1)/2)>>8,o=255&e.charCodeAt((h+1)/2)):i=o=NaN),h+=3,n=t>>2,a=(3&t)<<4|i>>4,s=(15&i)<<2|o>>6,l=63&o,isNaN(i)?s=l=64:isNaN(o)&&(l=64),c=c+r._keyStr.charAt(n)+r._keyStr.charAt(a)+r._keyStr.charAt(s)+r._keyStr.charAt(l);return c},decompressFromBase64:function(e){if(null==e)return"";var t,i,o,n,a,s,l,c="",h=0,A=0,p=r._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");A<e.length;)i=r._keyStr.indexOf(e.charAt(A++))<<2|(a=r._keyStr.indexOf(e.charAt(A++)))>>4,o=(15&a)<<4|(s=r._keyStr.indexOf(e.charAt(A++)))>>2,n=(3&s)<<6|(l=r._keyStr.indexOf(e.charAt(A++))),h%2==0?(t=i<<8,64!=s&&(c+=p(t|o)),64!=l&&(t=n<<8)):(c+=p(t|i),64!=s&&(t=o<<8),64!=l&&(c+=p(t|n))),h+=3;return r.decompress(c)},compressToUTF16:function(e){if(null==e)return"";var t,i,o,n="",a=0,s=r._f;for(e=r.compress(e),t=0;t<e.length;t++)switch(i=e.charCodeAt(t),a++){case 0:n+=s(32+(i>>1)),o=(1&i)<<14;break;case 1:n+=s(o+(i>>2)+32),o=(3&i)<<13;break;case 2:n+=s(o+(i>>3)+32),o=(7&i)<<12;break;case 3:n+=s(o+(i>>4)+32),o=(15&i)<<11;break;case 4:n+=s(o+(i>>5)+32),o=(31&i)<<10;break;case 5:n+=s(o+(i>>6)+32),o=(63&i)<<9;break;case 6:n+=s(o+(i>>7)+32),o=(127&i)<<8;break;case 7:n+=s(o+(i>>8)+32),o=(255&i)<<7;break;case 8:n+=s(o+(i>>9)+32),o=(511&i)<<6;break;case 9:n+=s(o+(i>>10)+32),o=(1023&i)<<5;break;case 10:n+=s(o+(i>>11)+32),o=(2047&i)<<4;break;case 11:n+=s(o+(i>>12)+32),o=(4095&i)<<3;break;case 12:n+=s(o+(i>>13)+32),o=(8191&i)<<2;break;case 13:n+=s(o+(i>>14)+32),o=(16383&i)<<1;break;case 14:n+=s(o+(i>>15)+32,32+(32767&i)),a=0}return n+s(o+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var t,i,o="",n=0,a=0,s=r._f;a<e.length;){switch(i=e.charCodeAt(a)-32,n++){case 0:t=i<<1;break;case 1:o+=s(t|i>>14),t=(16383&i)<<2;break;case 2:o+=s(t|i>>13),t=(8191&i)<<3;break;case 3:o+=s(t|i>>12),t=(4095&i)<<4;break;case 4:o+=s(t|i>>11),t=(2047&i)<<5;break;case 5:o+=s(t|i>>10),t=(1023&i)<<6;break;case 6:o+=s(t|i>>9),t=(511&i)<<7;break;case 7:o+=s(t|i>>8),t=(255&i)<<8;break;case 8:o+=s(t|i>>7),t=(127&i)<<9;break;case 9:o+=s(t|i>>6),t=(63&i)<<10;break;case 10:o+=s(t|i>>5),t=(31&i)<<11;break;case 11:o+=s(t|i>>4),t=(15&i)<<12;break;case 12:o+=s(t|i>>3),t=(7&i)<<13;break;case 13:o+=s(t|i>>2),t=(3&i)<<14;break;case 14:o+=s(t|i>>1),t=(1&i)<<15;break;case 15:o+=s(t|i),n=0}a++}return r.decompress(o)},compress:function(e){if(null==e)return"";var t,i,o,n={},a={},s="",l="",c="",h=2,A=3,p=2,d="",m=0,u=0,g=r._f;for(o=0;o<e.length;o+=1)if(s=e.charAt(o),Object.prototype.hasOwnProperty.call(n,s)||(n[s]=A++,a[s]=!0),l=c+s,Object.prototype.hasOwnProperty.call(n,l))c=l;else{if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(t=0;t<p;t++)m<<=1,15==u?(u=0,d+=g(m),m=0):u++;for(i=c.charCodeAt(0),t=0;t<8;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1}else{for(i=1,t=0;t<p;t++)m=m<<1|i,15==u?(u=0,d+=g(m),m=0):u++,i=0;for(i=c.charCodeAt(0),t=0;t<16;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[c]}else for(i=n[c],t=0;t<p;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1;0==--h&&(h=Math.pow(2,p),p++),n[l]=A++,c=String(s)}if(""!==c){if(Object.prototype.hasOwnProperty.call(a,c)){if(c.charCodeAt(0)<256){for(t=0;t<p;t++)m<<=1,15==u?(u=0,d+=g(m),m=0):u++;for(i=c.charCodeAt(0),t=0;t<8;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1}else{for(i=1,t=0;t<p;t++)m=m<<1|i,15==u?(u=0,d+=g(m),m=0):u++,i=0;for(i=c.charCodeAt(0),t=0;t<16;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[c]}else for(i=n[c],t=0;t<p;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(i=2,t=0;t<p;t++)m=m<<1|1&i,15==u?(u=0,d+=g(m),m=0):u++,i>>=1;for(;;){if(m<<=1,15==u){d+=g(m);break}u++}return d},decompress:function(e){if(null==e)return"";if(""==e)return null;var t,i,o,n,a,s,l,c=[],h=4,A=4,p=3,d="",m="",u=r._f,g={string:e,val:e.charCodeAt(0),position:32768,index:1};for(t=0;t<3;t+=1)c[t]=t;for(o=0,a=Math.pow(2,2),s=1;s!=a;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(n>0?1:0)*s,s<<=1;switch(o){case 0:for(o=0,a=Math.pow(2,8),s=1;s!=a;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(n>0?1:0)*s,s<<=1;l=u(o);break;case 1:for(o=0,a=Math.pow(2,16),s=1;s!=a;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(n>0?1:0)*s,s<<=1;l=u(o);break;case 2:return""}for(c[3]=l,i=m=l;;){if(g.index>g.string.length)return"";for(o=0,a=Math.pow(2,p),s=1;s!=a;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(n>0?1:0)*s,s<<=1;switch(l=o){case 0:for(o=0,a=Math.pow(2,8),s=1;s!=a;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(n>0?1:0)*s,s<<=1;c[A++]=u(o),l=A-1,h--;break;case 1:for(o=0,a=Math.pow(2,16),s=1;s!=a;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=32768,g.val=g.string.charCodeAt(g.index++)),o|=(n>0?1:0)*s,s<<=1;c[A++]=u(o),l=A-1,h--;break;case 2:return m}if(0==h&&(h=Math.pow(2,p),p++),c[l])d=c[l];else{if(l!==A)return null;d=i+i.charAt(0)}m+=d,c[A++]=i+d.charAt(0),i=d,0==--h&&(h=Math.pow(2,p),p++)}}};"undefined"!=typeof module&&null!=module&&(module.exports=r),function(){if(void 0===e.performance&&(e.performance={}),!e.performance.now){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),e.performance.now=function(){return Date.now()-t}}}(),i.prototype={setFrames:function(e){this.frameData=e,this.frameIndex=0,this.frameCount=e.length,this.leftCropPosition=0,this.rightCropPosition=this.frameCount,this.setMetaData()},addFrame:function(e){this.frameData.push(e)},currentFrame:function(){return this.frameData[this.frameIndex]},nextFrame:function(){var e=this.frameIndex+1;return(e%=this.rightCropPosition||1)<this.leftCropPosition&&(e=this.leftCropPosition),this.frameData[e]},advanceFrame:function(){return++this.frameIndex>=this.rightCropPosition&&!this.options.loop?(this.frameIndex--,!1):(this.frameIndex=this.frameIndex%(this.rightCropPosition||1),this.frameIndex<this.leftCropPosition&&(this.frameIndex=this.leftCropPosition),!0)},readyPlay:function(){++this.frameIndex>=this.rightCropPosition?(this.frameIndex=this.frameIndex%(this.rightCropPosition||1),this.frameIndex<this.leftCropPosition&&(this.frameIndex=this.leftCropPosition)):this.frameIndex--},cloneCurrentFrame:function(){return JSON.parse(JSON.stringify(this.currentFrame()))},createLerpFrameData:function(e){for(var t,i,r,o=this.currentFrame(),n=this.nextFrame(),a=["palmPosition","stabilizedPalmPosition","sphereCenter","direction","palmNormal","palmVelocity"],s=["mcpPosition","pipPosition","dipPosition","tipPosition","direction"],l=this.cloneCurrentFrame(),c=l.hands.length,h=l.pointables.length,A=a.length,p=s.length,d=0;d<c;d++){i=l.hands[d];for(var m=0;m<A;m++)t=a[m],o.hands[d][t]&&n.hands[d]&&Leap.vec3.lerp(i[t],o.hands[d][t],n.hands[d][t],e)}for(d=0;d<h;d++)for(r=l.pointables[d],m=0;m<p;m++)t=s[m],o.pointables[d][t]&&n.hands[d]&&Leap.vec3.lerp(r[t],o.pointables[d][t],n.pointables[d][t],0);return l},timeToNextFrame:function(){var e=(this.nextFrame().timestamp-this.currentFrame().timestamp)/1e3;return e<0&&(e=this.timeBetweenLoops),e},blank:function(){return 0===this.frameData.length},leftCrop:function(){this.leftCropPosition=this.frameIndex},rightCrop:function(){this.rightCropPosition=this.frameIndex},cullFrames:function(e){console.log("cull frames",e),e||(e=1);for(var t=0;t<this.frameData.length;t++)this.frameData.splice(t,e);this.setMetaData()},frameRate:function(){return 0==this.frameData.length?0:this.frameData.length/(this.frameData[this.frameData.length-1].timestamp-this.frameData[0].timestamp)*1e6},croppedFrameData:function(){return this.frameData.slice(this.leftCropPosition,this.rightCropPosition)},setMetaData:function(){var e={formatVersion:2,generatedBy:"LeapJS Playback 0.2.0",frames:this.rightCropPosition-this.leftCropPosition,protocolVersion:this.options.requestProtocolVersion,serviceVersion:this.options.serviceVersion,frameRate:this.frameRate().toPrecision(2),modified:(new Date).toString()};this.metadata||(this.metadata={});for(var t in e)this.metadata[t]=e[t]},packedFrameData:function(){var e,t=this.croppedFrameData(),i=[];i.push(this.packingStructure);for(var r=0,o=t.length;r<o;r++)e=t[r],i.push(this.packArray(this.packingStructure,e));return i},packArray:function(e,t){for(var i,r=[],o=0,n=e.length;o<n;o++)if("string"==typeof(i=e[o]))r.push(t[i]);else if("[object Array]"==Object.prototype.toString.call(i))for(var a=0,s=t.length;a<s;a++)r.push(this.packArray(i,t[a]));else{for(var l in i)break;r.push(this.packArray(i[l],t[l]))}return r},unPackFrameData:function(e){for(var t,i=e[0],r=[],o=1,n=e.length;o<n;o++)t=e[o],r.push(this.unPackArray(i,t));return r},unPackArray:function(e,t){for(var i,r={},o=0,n=e.length;o<n;o++)if("string"==typeof(i=e[o]))r[i]=t[o];else{if("[object Array]"==Object.prototype.toString.call(i)){for(var a=[],s=0,l=t.length;s<l;s++)a.push(this.unPackArray(i,t[s]));return a}for(var c in i)break;r[c]=this.unPackArray(i[c],t[o])}return r},toHash:function(){return this.setMetaData(),{metadata:this.metadata,frames:this.packedFrameData()}},export:function(e){var t=JSON.stringify(this.toHash());return"json"==e?t:r.compressToBase64(t)},save:function(e){var t;t=this.metadata.title?this.metadata.title.replace(/\s/g,""):"leap-playback-recording",this.metadata.frameRate&&(t+="-"+Math.round(this.metadata.frameRate)+"fps"),"json"===e?saveAs(new Blob([this.export("json")],{type:"text/JSON;charset=utf-8"}),t+".json"):saveAs(new Blob([this.export("lz")],{type:"application/x-gzip;charset=utf-8"}),t+".json.lz")},decompress:function(e){return r.decompressFromBase64(e)},loaded:function(){return!(!this.frameData||!this.frameData.length)},loadFrameData:function(e){var t=new XMLHttpRequest,i=this.url,r=this;t.onreadystatechange=function(){t.readyState===t.DONE&&(200===t.status||0===t.status?t.responseText?r.finishLoad(t.responseText,e):console.error('Leap Playback: "'+i+'" seems to be unreachable or the file is empty.'):console.error("Leap Playback: Couldn't load \""+i+'" ('+t.status+")"))},t.addEventListener("progress",function(e){if(r.options.loadProgress&&e.lengthComputable){var t=e.loaded/e.total;r.options.loadProgress(r,t,e)}}),this.loading=!0,t.open("GET",i,!0),t.send(null)},finishLoad:function(e,t){var i=this.url;"lz"==i.split(".")[i.split(".").length-1]&&(e=this.decompress(e)),2==(e=JSON.parse(e)).metadata.formatVersion&&(e.frames=this.unPackFrameData(e.frames)),this.metadata=e.metadata,console.log("Recording loaded:",this.metadata),this.loading=!1,t&&t.call(this,e.frames)},loadCompressedRecording:function(e,t){var i=this.decompress(e);2==(i=JSON.parse(i)).metadata.formatVersion&&(i.frames=this.unPackFrameData(i.frames)),this.metadata=i.metadata,console.log("Recording loaded:",this.metadata),this.loading=!1,t&&t.call(this,i.frames)}},function(){function t(e,t){var i=this;t||(t={}),this.options=t,this.recording=t.recording,this.controller=e,this.resetTimers(),this.setupLoops(),this.controller.connection.on("ready",function(){i.setupProtocols()}),this.userHasControl=!1,t.recording&&("[object String]"==Object.prototype.toString.call(t.recording)&&(t.recording={url:t.recording}),this.setRecording(t.recording)),document.addEventListener("DOMContentLoaded",function(e){document.body.addEventListener("keydown",function(e){e.which===i.options.pauseHotkey&&i.toggle()},!1)})}t.prototype={resetTimers:function(){this.timeSinceLastFrame=0,this.lastFrameTime=null},setupLoops:function(){var e=this;this.stepFrameLoop=function(t){"playing"==e.state&&(e.sendFrameAt(t||performance.now()),requestAnimationFrame(e.stepFrameLoop))}},setupProtocols:function(){var e=this;this.stopProtocol=this.controller.connection.protocol,this.playbackProtocol=function(t){var i=e.stopProtocol(t);return i instanceof Leap.Frame?(e.pauseOnHand&&(t.hands.length>0?(e.userHasControl=!0,e.controller.emit("playback.userTakeControl"),e.setGraphic(),e.idle()):0==t.hands.length&&e.userHasControl&&e.resumeOnHandLost&&(e.userHasControl=!1,e.controller.emit("playback.userReleaseControl"),e.setGraphic("wave"))),{type:"playback"}):i},this.recordProtocol=function(t){var i=e.stopProtocol(t);return i instanceof Leap.Frame&&e.recordFrameHandler(t),i};for(var t in this.stopProtocol)this.stopProtocol.hasOwnProperty(t)&&(this.playbackProtocol[t]=this.stopProtocol[t],this.recordProtocol[t]=this.stopProtocol[t]);"playing"==this.state&&(this.controller.connection.protocol=this.playbackProtocol)},sendFrameAt:function(e){this.lastFrameTime&&(e<this.lastFrameTime?this.lastFrameTime=e:this.timeSinceLastFrame+=e-this.lastFrameTime),this.lastFrameTime=e;for(var t;this.timeSinceLastFrame>(t=this.recording.timeToNextFrame());)if(this.timeSinceLastFrame-=t,!this.recording.advanceFrame())return this.pause(),void this.controller.emit("playback.playbackFinished",this);this.sendFrame(this.recording.createLerpFrameData(this.timeSinceLastFrame/t))},sendFrame:function(e){if(!e)throw"Frame data not provided";var t=new Leap.Frame(e);return this.controller.processFrame(t),!0},sendImmediateFrame:function(e){if(!e)throw"Frame data not provided";var t=new Leap.Frame(e);return this.controller.processFinishedFrame(t),!0},setFrameIndex:function(e){e!=this.recording.frameIndex&&(this.recording.frameIndex=e%this.recording.frameCount,this.sendFrame(this.recording.currentFrame()))},stop:function(){this.idle(),delete this.recording,this.recording=new i({timeBetweenLoops:this.options.timeBetweenLoops,loop:this.options.loop,requestProtocolVersion:this.controller.connection.opts.requestProtocolVersion,serviceVersion:this.controller.connection.protocol.serviceVersion}),this.controller.emit("playback.stop",this)},pause:function(){this.state="idle",this.hideOverlay(),this.controller.emit("playback.pause",this)},idle:function(){this.state="idle",this.controller.connection.protocol=this.stopProtocol},toggle:function(){"idle"==this.state?this.play():"playing"==this.state&&this.pause()},record:function(){this.clear(),this.stop(),this.state="recording",this.controller.connection.protocol=this.recordProtocol,this.setGraphic("connect"),this.controller.emit("playback.record",this)},clear:function(){if(this.recording&&!this.recording.blank()){var e=this.recording.cloneCurrentFrame();e.hands=[],e.fingers=[],e.pointables=[],e.tools=[],this.sendImmediateFrame(e)}},recordPending:function(){return"recording"==this.state&&this.recording.blank()},isRecording:function(){return"recording"==this.state&&!this.recording.blank()},finishRecording:function(){this.controller.connection.protocol=this.playbackProtocol,this.recording.setFrames(this.recording.frameData),this.controller.emit("playback.recordingFinished",this)},loaded:function(){return this.recording.loaded()},loading:function(){return this.recording.loading},play:function(){if("playing"!==this.state&&!this.loading()&&!this.recording.blank()){this.state="playing",this.controller.connection.protocol=this.playbackProtocol;var e=this;this.controller.connection.removeAllListeners("frame"),this.controller.connection.on("frame",function(t){e.resumeOnHandLost&&e.autoPlay&&"idle"==e.state&&0==t.hands.length&&e.play(),e.controller.processFrame(t)}),this.resetTimers(),this.recording.readyPlay(),this.stepFrameLoop(),this.controller.emit("playback.play",this)}},recordFrameHandler:function(e){this.setGraphic("wave"),e.hands.length>0?(this.recording.addFrame(e),this.hideOverlay()):this.recording.blank()||this.finishRecording()},setRecording:function(e){var t=this;this.pause();var r=function(e){this.setFrames(e),t.recording==this?(t.autoPlay&&(t.play(),t.pauseOnHand&&!t.controller.streaming()&&t.setGraphic("connect")),t.controller.emit("playback.recordingSet",this)):console.log("recordings changed during load")};return this.recording=e,e instanceof i||(this.recording.__proto__=i.prototype,i.call(this.recording,{timeBetweenLoops:this.options.timeBetweenLoops,loop:this.options.loop,loadProgress:function(e,i,r){t.controller.emit("playback.ajax:progress",e,i,r)}})),this.recording.loaded()?r.call(this.recording,this.recording.frameData):e.url?(this.controller.emit("playback.ajax:begin",this,this.recording),this.recording.loadFrameData(function(e){r.call(this,e),t.controller.emit("playback.ajax:complete",t,this)})):e.compressedRecording&&this.recording.loadCompressedRecording(e.compressedRecording,function(e){r.call(this,e)}),this},hideOverlay:function(){this.overlay&&(this.overlay.style.display="none")},setGraphic:function(e){if(this.overlay&&this.graphicName!=e)switch(this.graphicName=e,e){case"connect":this.overlay.style.display="block",this.overlay.innerHTML='<img class="playback-connect-leap" style="margin: 0px 2px -2px 0px; max-width: 100%;" src="data:image/gif;base64,R0lGODlh9AHmAPf/AOnxtbS0tc3eVTMzNM3NztvnhtbX1/Hy86ioqezs7Z6entzd3r7UJdHhZcnKzOjo6sXZO319fkJCQurq6xMTFPj65q2treHh4vT42uXl5/Lz9JCQkfP09FxcXebm54yMjsvMzSgoKdfleLGxsUtLTPDx8cHCwlNTVSIiI6CgoYSEhAUFBpmZmtHS1Li5ucHDxNHR0err7HZ2duDrl8XFxvP09vv98/Dx8trb3MjIyN7e3x4eHmZmZj4+PrzTHtDQ0uvs7dra2uzt7ZWVldfY2cPExtbX2AsLDImJiff4+MbHysjIyoCBgsXGyHp6er6+vsDVKm5ucOTk5XFxc83O0MbGx2FhYm1tbsDWLKWlpu70xRkZGkVFRtPU1pydoM/Q0bKztKamqCQkJeLi5O/w8Glpab/AwtjY2f7+/WtrbcfIytjZ26qrrDc4OdHS0nBxc7/VJ5KTlI6Oj9LS0/v8/b7UI3JzdMPDxIqKi5aWl7y9vi4uL8fHx3BwcNvc3pKSk62usCsrLN/f4Ly8vZydnp2dndXV1snJycXGym5vcefn6IuMjYWFhYODhiMjJCYmJ+fo6UhISR8fH/7+/hsbHP39/ejo6cHWLu/v8Lq7vPv7++nq6+3u7q+wsby9wL6/wvj4+Pz8/Pr6+vLy8+bn6O7u7vj4+e3u7/f3+PT19fn5+ff39/T09Pb29+jo6MHWL/b29vLy8vT09e7v8L2+v/Pz9O7u7/39/vHy9L2+wbi6ve/v7+no6fz9/fn6+vj5+fv7/Pr7+////v7//8XGx/X19vX29vb39+7v7/z8/enp6uPk5fr6+/n5+g8PENTU1Hh4eYeHh05OT+fo6JGSk0BAQOTl6CAgIS8vML+/wHNzc5eYmLa3t+Xm54OEhfn4+Y+PkFdXV1hZWv3++IiIiJGRkZubm3t8ff7+/35/gOjp6ru8vmRkZMTFyLO0tWJiY6eoqycnKGxsbkNDQ77TIl5eX6Kjo+Xm6QcHBwgICZSUlvLz8y0tLv///wAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMUExNDAzQjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQyMUExNDA0QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDIxQTE0MDFCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxQTE0MDJCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMi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">';break;case"wave":this.overlay.style.display="block",this.overlay.innerHTML='<img class="playback-move-hand" style="margin: 0px 2px -2px 0px; max-width: 100%;" src="data:image/gif;base64,R0lGODlh9AHtAPf/AJ2dnfT09KWlpZWVlejo6bGxsRwcHHl5eYmJiRMTFOrq66GhoYWFhcHCxObm54GBgdjY2GFhYcXGydPT0+Dg4OPj4319fQsLC0ZGRuTk5GlpaVVVVV5eXpGRkXFxcd7e3kFBQXV1ddbW1lJSUsDAwNvb221tbk1OTgMDAykpKaurqzw9PdTU1FlZWdzc3JiYmMjKzLu7u8jIyJubnPLy9M7Ozr2/wUlJSTo6OsLCwmRkZDY2NtDQ0DIyMr29vaytsKysrC4uLra2ttHS1CUlJtXX2MrKy6+vr5qamiEhIczMzM3O0LS0tMTExMbGxsbIyt7e4I2Njby8vOTl5qioqMPEx+rr7KqqrOjo6np6fNTV17i4uMzNzo+Pj3Z3ePHx8rm7veDh4uzt7r/AwoeHh8PDxM/Q0sTFx42OkMDBw+fo6bW3utjZ2vHy8tHR0sjJyru8v+Xl5d3d3dzc3mNjZJ+fn2pra+np6t/f4OLj5NPT1V9fYFdXV8HCxsDBxbO0tq6vsqqsrk9PT0tLS5KTlGdnZ4uMjn1+gHd4e1JTUzs7PEJCQzMzMysrK+fn6P7+/v////39/fPz8+7u7/z8/Pv7+/f39/b29vr6+vj4+Pn5+e7u7vLy8u/v7+3t7ezs7PDw8Ozs7fHx8fDw8fb29/Ly8/X19fr6+/z8/fn5+tvc3e/v8HNzdKmpqvf3+CMjJPDx8fP09OPk5ZmZmvj5+Xt8flBQUP39/mtsbvLz8+/w8Nra3NXW15+govr7+x8fH7m5uicnJ+fn6ezt7Zqcn7Kzs7S0s1hYWLe4uvz9/aanqq2trf3+/ouLi2NkZqOjo5aXmqKkppeYmmBgYPv7/JSVl4ODg4eHihcXFw8PD/7//9HS0kBAQOHh4mhoa0RERDAwMPf4+AcHB+vr7NfX11xcXKenp5manJqameXm6ExMTcjHyfv8/G9vb/j4+UdHRywsLHN0dj4+PsrLzTQ0NObm6Obn6efm6Ly9v39/fzc4OL2+v+3s7fb39wAAAP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMUExNDA3QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQyMUExNDA4QjE2NzExRTNBMUE1RTA3Qjc0NDg0NDMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDIxQTE0MDVCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxQTE0MDZCMTY3MTFFM0ExQTVFMDdCNzQ0ODQ0MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMi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" />';break;case void 0:this.overlay.innerHTML=""}}};var r=function(i){var r=this,o=i.autoPlay;void 0===o&&(o=!0);var n=i.pauseOnHand;void 0===n&&(n=!0);var a=i.resumeOnHandLost;void 0===a&&(a=!0);var s=i.timeBetweenLoops;void 0===s&&(s=50);var l=i.requiredProtocolVersion,c=i.pauseHotkey;void 0===c&&(c=32);var h=i.loop;void 0===h&&(h=!0);var A=i.overlay;void 0===A&&document.body&&(A=document.createElement("div"),document.body.appendChild(A),A.style.width="100%",A.style.position="absolute",A.style.top="0",A.style.left="-"+e.getComputedStyle(document.body).getPropertyValue("margin"),A.style.padding="10px",A.style.textAlign="center",A.style.fontSize="18px",A.style.opacity="0.8",A.style.display="none",A.style.zIndex="10",A.id="connect-leap",A.style.cursor="pointer",A.addEventListener("click",function(){return this.style.display="none",!1},!1)),i.player=new t(this,{recording:i.recording,loop:h,pauseHotkey:c,timeBetweenLoops:s}),i.player.overlay=A,i.player.pauseOnHand=n,i.player.resumeOnHandLost=a,i.player.requiredProtocolVersion=l,i.player.autoPlay=o;var p=function(){if(i.player.pauseOnHand&&r.connection.opts.requestProtocolVersion<i.requiredProtocolVersion)return console.log("Protocol Version too old ("+r.connection.opts.requestProtocolVersion+"), disabling device interaction."),void(i.player.pauseOnHand=!1);o&&(r.on("streamingStarted",function(){"recording"==i.player.state?(i.player.pause(),i.player.setGraphic("wave")):n?i.player.setGraphic("wave"):i.player.setGraphic()}),r.on("streamingStopped",function(){i.player.play()})),r.on("streamingStopped",function(){i.player.setGraphic("connect")})};return this.connection.connected?p():this.on("ready",p),{}};if("undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("playback",r);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.playback=r}}.call(this)}(window),function(){var e;if(e=function(e){var t,i;return null==e&&(e={}),e.positioning||(e.positioning="absolute"),e.scale||(e.scale=1),e.scaleX||(e.scaleX=1),e.scaleY||(e.scaleY=1),e.scaleZ||(e.scaleZ=1),e.verticalOffset||(e.verticalOffset=0),6,-100,i={absolute:function(t){return[window.innerWidth/2+6*t[0]*e.scale*e.scaleX,window.innerHeight+-100+e.verticalOffset-6*t[1]*e.scale*e.scaleY,6*t[2]*e.scale*e.scaleZ]}},t=function(t,r){var o;return null==r&&(r=!1),o="function"==typeof e.positioning?e.positioning.call(this,t):i[e.positioning].call(this,t),r&&(this.screenPositionVec3=o),o},{hand:{screenPosition:function(e){return t.call(this,e||this.palmPosition,!e)}},pointable:{screenPosition:function(e){return t.call(this,e||this.tipPosition,!e)}}}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("screenPosition",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.screenPosition=e}}.call(this),function(){Leap.plugin("transform",function(e){var t,i,r,o,n,a;return null==e&&(e={}),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t=new THREE.Matrix4,!0===e.vr&&(this.setOptimizeHMD(!0),e.quaternion=(new THREE.Quaternion).setFromRotationMatrix((new THREE.Matrix4).set(-1,0,0,0,0,0,-1,0,0,-1,0,0,0,0,0,1)),e.scale=.001,e.position=new THREE.Vector3(0,0,-.08)),"desktop"===e.vr&&(e.scale=.001),e.getTransform=function(r){var o;return e.matrix?(o="function"==typeof e.matrix?e.matrix(r):e.matrix,window.THREE&&o instanceof THREE.Matrix4?o.elements:o):e.position||e.quaternion||e.scale?(t.set.apply(t,i),e.quaternion&&t.makeRotationFromQuaternion("function"==typeof e.quaternion?e.quaternion(r):e.quaternion),e.position&&t.setPosition("function"==typeof e.position?e.position(r):e.position),t.elements):i},e.getScale=function(t){return isNaN(e.scale)||(e.scale=new THREE.Vector3(e.scale,e.scale,e.scale)),"function"==typeof e.scale?e.scale(t):e.scale},n=function(e,t){var i,r,o,n;for(o=[],i=0,r=t.length;i<r;i++)(n=t[i])?o.push(Leap.vec3.transformMat4(n,n,e)):o.push(void 0);return o},o=function(e,t,i){var r,o,n;return r=t[0],o=t[1],n=t[2],e[0]=i[0]*r+i[4]*o+i[8]*n,e[1]=i[1]*r+i[5]*o+i[9]*n,e[2]=i[2]*r+i[6]*o+i[10]*n,e},r=function(e,t){var i,r,n,a;for(n=[],i=0,r=t.length;i<r;i++)(a=t[i])?n.push(o(a,a,e)):n.push(void 0);return n},a=function(e,t,i){var o,a,s,l,c,h,A,p;for(r(t,[e.direction,e.palmNormal,e.palmVelocity,e.arm.basis[0],e.arm.basis[1],e.arm.basis[2]]),a=0,l=(h=e.fingers).length;a<l;a++)o=h[a],r(t,[o.direction,o.metacarpal.basis[0],o.metacarpal.basis[1],o.metacarpal.basis[2],o.proximal.basis[0],o.proximal.basis[1],o.proximal.basis[2],o.medial.basis[0],o.medial.basis[1],o.medial.basis[2],o.distal.basis[0],o.distal.basis[1],o.distal.basis[2]]);for(Leap.glMatrix.mat4.scale(t,t,i),n(t,[e.palmPosition,e.stabilizedPalmPosition,e.sphereCenter,e.arm.nextJoint,e.arm.prevJoint]),s=0,c=(A=e.fingers).length;s<c;s++)o=A[s],n(t,[o.carpPosition,o.mcpPosition,o.pipPosition,o.dipPosition,o.distal.nextJoint,o.tipPosition]);return p=(i[0]+i[1]+i[2])/3,e.arm.width*=p},{frame:function(t){var i,r,o,n,s,l,c,h,A,p;if(t.valid&&!t.data.transformed){for(t.data.transformed=!0,p=[],o=0,l=(h=t.hands).length;o<l;o++){for(r=h[o],a(r,e.getTransform(r),(e.getScale(r)||new THREE.Vector3(1,1,1)).toArray()),e.effectiveParent&&a(r,e.effectiveParent.matrixWorld.elements,e.effectiveParent.scale.toArray()),s=null,n=0,c=(A=r.fingers).length;n<c;n++)i=A[n],s=Leap.vec3.create(),Leap.vec3.sub(s,i.mcpPosition,i.carpPosition),i.metacarpal.length=Leap.vec3.length(s),Leap.vec3.sub(s,i.pipPosition,i.mcpPosition),i.proximal.length=Leap.vec3.length(s),Leap.vec3.sub(s,i.dipPosition,i.pipPosition),i.medial.length=Leap.vec3.length(s),Leap.vec3.sub(s,i.tipPosition,i.dipPosition),i.distal.length=Leap.vec3.length(s);Leap.vec3.sub(s,r.arm.prevJoint,r.arm.nextJoint),p.push(r.arm.length=Leap.vec3.length(s))}return p}}}})}.call(this),function(){var e;if(e=function(e){return e.alert||(e.alert=!1),e.requiredProtocolVersion||(e.requiredProtocolVersion=6),e.disconnect||(e.disconnect=!0),"undefined"!=typeof Leap&&Leap.Controller&&Leap.version.minor<5&&Leap.version.dot<4&&console.warn("LeapJS Version Check plugin incompatible with LeapJS pre 0.4.4"),this.on("ready",function(){var t,i,r;if(r=e.requiredProtocolVersion,(t=this.connection.opts.requestProtocolVersion)<r)return i="Protocol Version too old. v"+r+" required, v"+t+" available.",e.disconnect&&(this.disconnect(),i+=" Disconnecting."),console.warn(i),e.alert&&alert("Your Leap Software version is out of date.  Visit http://www.leapmotion.com/setup to update"),this.emit("versionCheck.outdated",{required:r,current:t,disconnect:e.disconnect})}),{}},"undefined"!=typeof Leap&&Leap.Controller)Leap.Controller.plugin("versionCheck",e);else{if("undefined"==typeof module)throw"leap.js not included";module.exports.versionCheck=e}}.call(this);